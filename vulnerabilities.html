<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مركز محاكاة الثغرات | CIPHER 9</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root { --neon: #00ff41; --bg: #020617; --terminal-bg: #050505; --cyan: #00f2ff; }
        body { background: var(--bg); color: var(--neon); font-family: 'Cairo', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }
        
        #matrix-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; opacity: 0.2; }

        .vulnerability-center { z-index: 10; width: 90%; max-width: 800px; text-align: center; }
        
        .header { margin-bottom: 30px; }
        .header i { font-size: 50px; text-shadow: 0 0 20px var(--neon); }

        /* شاشة التيرمنال */
        #terminal {
            background: var(--terminal-bg);
            border: 1px solid #333;
            border-radius: 12px;
            padding: 20px;
            text-align: right;
            font-family: 'Fira Code', monospace;
            height: 350px;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            display: none;
            margin-top: 20px;
        }

        .log-line { margin: 5px 0; font-size: 14px; border-right: 2px solid var(--neon); padding-right: 10px; }
        .success { color: var(--neon); }
        .warning { color: #facc15; }
        .danger { color: #ff003c; }
        .info { color: var(--cyan); }

        .selection-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .vuln-card {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(0, 255, 65, 0.2);
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: 0.3s;
        }
        .vuln-card:hover { border-color: var(--neon); background: rgba(0, 255, 65, 0.05); transform: translateY(-5px); }
        .vuln-card i { font-size: 30px; margin-bottom: 10px; }
        .vuln-card h3 { margin: 0; font-size: 16px; }

        .back-btn { margin-top: 30px; color: #666; text-decoration: none; font-size: 14px; display: inline-block; }
    </style>
</head>
<body>

    <canvas id="matrix-canvas"></canvas>

    <div class="vulnerability-center">
        <div id="setup-view">
            <div class="header">
                <i class="fas fa-microchip"></i>
                <h2>مختبر محاكاة الثغرات</h2>
                <p>اختر نوع الهجوم لبدء عملية الاختراق التجريبية</p>
            </div>

            <div class="selection-grid">
                <div class="vuln-card" onclick="runSimulation('SQLi')">
                    <i class="fas fa-database"></i>
                    <h3>SQL Injection</h3>
                </div>
                <div class="vuln-card" onclick="runSimulation('Brute')">
                    <i class="fas fa-key"></i>
                    <h3>Brute Force</h3>
                </div>
                <div class="vuln-card" onclick="runSimulation('XSS')">
                    <i class="fas fa-code"></i>
                    <h3>XSS Attack</h3>
                </div>
                <div class="vuln-card" onclick="runSimulation('CCTV')">
                    <i class="fas fa-video"></i>
                    <h3>CCTV Bypass</h3>
                </div>
            </div>
            <a href="more.html" class="back-btn"><i class="fas fa-arrow-right"></i> العودة لمركز القيادة</a>
        </div>

        <div id="terminal"></div>
    </div>

    <script>
        const terminal = document.getElementById('terminal');
        const setupView = document.getElementById('setup-view');

        async function addLog(text, type = 'info', delay = 600) {
            const line = document.createElement('div');
            line.className = `log-line ${type}`;
            line.innerHTML = `[${new Date().toLocaleTimeString()}] ${text}`;
            terminal.appendChild(line);
            terminal.scrollTop = terminal.scrollHeight;
            return new Promise(r => setTimeout(r, delay));
        }

        async function runSimulation(type) {
            setupView.style.display = 'none';
            terminal.style.display = 'block';

            if (type === 'SQLi') {
                await addLog("جارٍ تحديد الهدف: https://target-db.com/login.php", 'info');
                await addLog("اختبار ثغرة الحقن ' OR 1=1 --", 'warning');
                await addLog("تم تجاوز جدار الحماية بنجاح!", 'success');
                await addLog("سحب بيانات المستخدمين...", 'info');
                await addLog("ID: 1 | User: Admin | Pass: $2y$10$O...", 'success');
                await addLog("ID: 2 | User: M_Fahad | Pass: $2y$12$R...", 'success');
            } else if (type === 'CCTV') {
                await addLog("جارٍ البحث عن كاميرات IP في النطاق...", 'info');
                await addLog("تم العثور على 14 كاميرا نشطة.", 'warning');
                await addLog("جارٍ كسر بروتوكول RTSP...", 'danger');
                await addLog("تم الوصول للكاميرا الرئيسية (مدخل الشركة).", 'success');
                await addLog("بث حي: [تغذية مرئية نشطة]", 'success');
            }
            // يمكن إضافة المزيد من المحاكات هنا بنفس الطريقة

            setTimeout(() => {
                alert("تمت المحاكاة بنجاح!");
                location.reload(); // للعودة للاختيار
            }, 5000);
        }

        // كود الماتريكس في الخلفية
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const columns = canvas.width / 20;
        const drops = Array(Math.floor(columns)).fill(1);
        function draw() {
            ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#00ff41";
            for(let i=0; i<drops.length; i++) {
                ctx.fillText(Math.floor(Math.random()*2), i*20, drops[i]*20);
                if(drops[i]*20 > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            }
        }
        setInterval(draw, 33);
    </script>
</body>
</html>
